!function(){var n=window.AmCharts;n.AmSlicedChart=n.Class({inherits:n.AmChart,construct:function(t){this.createEvents("rollOverSlice","rollOutSlice","clickSlice","pullOutSlice","pullInSlice","rightClickSlice"),n.AmSlicedChart.base.construct.call(this,t),this.colors="#FF0F00 #FF6600 #FF9E01 #FCD202 #F8FF01 #B0DE09 #04D215 #0D8ECF #0D52D1 #2A0CD0 #8A0CCF #CD0D74 #754DEB #DDDDDD #999999 #333333 #000000 #57032A #CA9726 #990000 #4B0C25".split(" "),this.alpha=1,this.groupPercent=0,this.groupedTitle="Other",this.groupedPulled=!1,this.groupedAlpha=1,this.marginLeft=0,this.marginBottom=this.marginTop=10,this.marginRight=0,this.hoverAlpha=1,this.outlineColor="#FFFFFF",this.outlineAlpha=0,this.outlineThickness=1,this.startAlpha=0,this.startDuration=1,this.startEffect="bounce",this.sequencedAnimation=!0,this.pullOutDuration=1,this.pullOutEffect="bounce",this.pullOnHover=this.pullOutOnlyOne=!1,this.labelsEnabled=!0,this.labelTickColor="#000000",this.labelTickAlpha=.2,this.hideLabelsPercent=0,this.urlTarget="_self",this.autoMarginOffset=10,this.gradientRatio=[],this.maxLabelWidth=200,this.accessibleLabel="[[title]]: [[percents]]% [[value]] [[description]]",n.applyTheme(this,t,"AmSlicedChart")},initChart:function(){n.AmSlicedChart.base.initChart.call(this),this.dataChanged&&(this.parseData(),this.dispatchDataUpdated=!0,this.dataChanged=!1,this.setLegendData(this.chartData)),this.drawChart()},handleLegendEvent:function(t){var i=t.type,e=t.dataItem,a=this.legend;if(e.wedge&&e){var s=e.hidden;switch(t=t.event,i){case"clickMarker":s||a.switchable||this.clickSlice(e,t);break;case"clickLabel":s||this.clickSlice(e,t,!1);break;case"rollOverItem":s||this.rollOverSlice(e,!1,t);break;case"rollOutItem":s||this.rollOutSlice(e,t);break;case"hideItem":this.hideSlice(e,t);break;case"showItem":this.showSlice(e,t)}}},invalidateVisibility:function(){this.recalculatePercents(),this.initChart();var t=this.legend;t&&t.invalidateSize()},addEventListeners:function(t,i){var e=this;t.mouseover(function(t){e.rollOverSlice(i,!0,t)}).mouseout(function(t){e.rollOutSlice(i,t)}).touchend(function(t){e.rollOverSlice(i,t)}).mouseup(function(t){e.clickSlice(i,t)}).contextmenu(function(t){e.handleRightClick(i,t)})},formatString:function(t,i,e){t=n.formatValue(t,i,["value"],this.nf,"",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers);var a=this.pf.precision;return isNaN(this.tempPrec)||(this.pf.precision=this.tempPrec),t=n.formatValue(t,i,["percents"],this.pf),t=n.massReplace(t,{"[[title]]":i.title,"[[description]]":i.description}),this.pf.precision=a,-1!=t.indexOf("[[")&&(t=n.formatDataContextValue(t,i.dataContext)),t=e?n.fixNewLines(t):n.fixBrakes(t),n.cleanFromEmpty(t)},startSlices:function(){for(var t=0;t<this.chartData.length;t++)0<this.startDuration&&this.sequencedAnimation?this.setStartTO(t):this.startSlice(this.chartData[t])},setStartTO:function(t){var i=this;t=setTimeout(function(){i.startSequenced.call(i)},i.startDuration/i.chartData.length*500*t),i.timeOuts.push(t)},pullSlices:function(t){for(var i=this.chartData,e=0;e<i.length;e++){var a=i[e];a.pulled&&this.pullSlice(a,1,t)}},startSequenced:function(){for(var t=this.chartData,i=0;i<t.length;i++)if(!t[i].started){this.startSlice(this.chartData[i]);break}},startSlice:function(t){t.started=!0;var i=t.wedge,e=this.startDuration,a=t.labelSet;i&&0<e&&(0<t.alpha&&i.show(),i.translate(t.startX,t.startY),this.animatable.push(i),i.animate({opacity:1,translate:"0,0"},e,this.startEffect)),a&&0<e&&(0<t.alpha&&a.show(),a.translate(t.startX,t.startY),a.animate({opacity:1,translate:"0,0"},e,this.startEffect))},showLabels:function(){for(var t=this.chartData,i=0;i<t.length;i++){var e,a=t[i];0<a.alpha&&((e=a.label)&&e.show(),a=a.tick)&&a.show()}},showSlice:function(t){isNaN(t)?t.hidden=!1:this.chartData[t].hidden=!1,this.invalidateVisibility()},hideSlice:function(t){isNaN(t)?t.hidden=!0:this.chartData[t].hidden=!0,this.hideBalloon(),this.invalidateVisibility()},rollOverSlice:function(t,i,e){var a,s,l,h;isNaN(t)||(t=this.chartData[t]),clearTimeout(this.hoverInt),t.hidden||(this.pullOnHover&&this.pullSlice(t,1),this.hoverAlpha<1&&t.wedge&&t.wedge.attr({opacity:this.hoverAlpha}),a=t.balloonX,s=t.balloonY,t.pulled&&(a+=t.pullX,s+=t.pullY),l=this.formatString(this.balloonText,t,!0),(h=this.balloonFunction)&&(l=h(t,l)),h=n.adjustLuminosity(t.color,-.15),l?this.showBalloon(l,h,i,a,s):this.hideBalloon(),0===t.value&&this.hideBalloon(),this.fire({type:"rollOverSlice",dataItem:t,chart:this,event:e}))},rollOutSlice:function(t,i){(t=isNaN(t)?t:this.chartData[t]).wedge&&t.wedge.attr({opacity:1}),this.hideBalloon(),this.fire({type:"rollOutSlice",dataItem:t,chart:this,event:i})},clickSlice:function(t,i,e){this.checkTouchDuration(i)&&((t=isNaN(t)?t:this.chartData[t]).pulled?this.pullSlice(t,0):this.pullSlice(t,1),n.getURL(t.url,this.urlTarget),e||this.fire({type:"clickSlice",dataItem:t,chart:this,event:i}))},handleRightClick:function(t,i){isNaN(t)||(t=this.chartData[t]),this.fire({type:"rightClickSlice",dataItem:t,chart:this,event:i})},drawTicks:function(){for(var t=this.chartData,i=0;i<t.length;i++){var e,a=t[i];a.label&&!a.skipTick&&(e=a.ty,e=n.line(this.container,[a.tx0,a.tx,a.tx2],[a.ty0,e,e],this.labelTickColor,this.labelTickAlpha),n.setCN(this,e,this.type+"-tick"),n.setCN(this,e,a.className,!0),a.tick=e,a.wedge.push(e),"AmFunnelChart"==this.cname)&&e.toBack()}},initialStart:function(){var t=this,i=t.startDuration,e=setTimeout(function(){t.showLabels.call(t)},1e3*i);t.timeOuts.push(e),!t.chartCreated&&(t.startSlices(),0<i)?(i=setTimeout(function(){t.pullSlices.call(t)},1200*i),t.timeOuts.push(i)):t.pullSlices(!0)},pullSlice:function(t,i,e){var a=this.pullOutDuration;!0===e&&(a=0),(e=t.wedge)&&(0<a?(e.animate({translate:i*t.pullX+","+i*t.pullY},a,this.pullOutEffect),t.labelSet&&t.labelSet.animate({translate:i*t.pullX+","+i*t.pullY},a,this.pullOutEffect)):(t.labelSet&&t.labelSet.translate(i*t.pullX,i*t.pullY),e.translate(i*t.pullX,i*t.pullY))),t=1==i?(t.pulled=!0,this.pullOutOnlyOne&&this.pullInAll(t.index),{type:"pullOutSlice",dataItem:t,chart:this}):(t.pulled=!1,{type:"pullInSlice",dataItem:t,chart:this}),this.fire(t)},pullInAll:function(t){for(var i=this.chartData,e=0;e<this.chartData.length;e++)e!=t&&i[e].pulled&&this.pullSlice(i[e],0)},pullOutAll:function(){for(var t=this.chartData,i=0;i<t.length;i++)t[i].pulled||this.pullSlice(t[i],1)},parseData:function(){var t=[],i=(this.chartData=t,this.dataProvider);if(isNaN(this.pieAlpha)||(this.alpha=this.pieAlpha),void 0!==i){for(var e,a=i.length,s=0,l=0;l<a;l++){var h={},r=i[l];null!==(h.dataContext=r)[this.valueField]&&(h.value=Number(r[this.valueField])),e=(e=r[this.titleField])||"",h.title=e,h.pulled=n.toBoolean(r[this.pulledField],!1),e=(e=r[this.descriptionField])||"",h.description=e,h.labelRadius=Number(r[this.labelRadiusField]),h.switchable=!0,h.className=r[this.classNameField],h.url=r[this.urlField],!(e=r[this.patternField])&&this.patterns&&(e=this.patterns[l]),h.pattern=e,h.visibleInLegend=n.toBoolean(r[this.visibleInLegendField],!0),e=r[this.alphaField],h.alpha=void 0!==e?Number(e):this.alpha,void 0!==(e=r[this.colorField])&&(h.color=e),h.labelColor=n.toColor(r[this.labelColorField]),s+=h.value,h.hidden=!1,t[l]=h}for(l=i=0;l<a;l++)(h=t[l]).percents=h.value/s*100,h.percents<this.groupPercent&&i++;for(1<i&&(this.groupValue=0,this.removeSmallSlices(),t.push({title:this.groupedTitle,value:this.groupValue,percents:this.groupValue/s*100,pulled:this.groupedPulled,color:this.groupedColor,url:this.groupedUrl,description:this.groupedDescription,alpha:this.groupedAlpha,pattern:this.groupedPattern,className:this.groupedClassName,dataContext:{}})),a=(a=this.baseColor)||this.pieBaseColor,s=(s=this.brightnessStep)||this.pieBrightnessStep,l=0;l<t.length;l++)a?e=n.adjustLuminosity(a,l*s/100):void 0===(e=this.colors[l])&&(e=n.randomColor()),void 0===t[l].color&&(t[l].color=e);this.recalculatePercents()}},recalculatePercents:function(){for(var t,i=this.chartData,e=0,a=0;a<i.length;a++)!(t=i[a]).hidden&&0<t.value&&(e+=t.value);for(a=0;a<i.length;a++)(t=this.chartData[a]).percents=!t.hidden&&0<t.value?100*t.value/e:0},removeSmallSlices:function(){for(var t=this.chartData,i=t.length-1;0<=i;i--)t[i].percents<this.groupPercent&&(this.groupValue+=t[i].value,t.splice(i,1))},animateAgain:function(){var t=this;t.startSlices();for(var i=0;i<t.chartData.length;i++){var e=t.chartData[i],a=(e.started=!1,e.wedge);a&&(a.setAttr("opacity",t.startAlpha),a.translate(e.startX,e.startY)),(a=e.labelSet)&&(a.setAttr("opacity",t.startAlpha),a.translate(e.startX,e.startY))}0<(i=t.startDuration)?(i=setTimeout(function(){t.pullSlices.call(t)},1200*i),t.timeOuts.push(i)):t.pullSlices()},measureMaxLabel:function(){for(var t=this.chartData,i=0,e=0;e<t.length;e++){var a=t[e],s=this.formatString(this.labelText,a),l=this.labelFunction;l&&(s=l(a,s)),i<(s=(a=n.text(this.container,s,this.color,this.fontFamily,this.fontSize)).getBBox().width)&&(i=s),a.remove()}return i}})}(),function(){var y=window.AmCharts;y.AmPieChart=y.Class({inherits:y.AmSlicedChart,construct:function(t){this.type="pie",y.AmPieChart.base.construct.call(this,t),this.cname="AmPieChart",this.pieBrightnessStep=30,this.minRadius=10,this.depth3D=0,this.startAngle=90,this.angle=this.innerRadius=0,this.startRadius="500%",this.pullOutRadius="20%",this.labelRadius=20,this.labelText="[[title]]: [[percents]]%",this.balloonText="[[title]]: [[percents]]% ([[value]])\n[[description]]",this.previousScale=1,this.adjustPrecision=!1,this.gradientType="radial",y.applyTheme(this,t,this.cname)},drawChart:function(){y.AmPieChart.base.drawChart.call(this);var t=this.chartData;if(y.ifArray(t)){if(0<this.realWidth&&0<this.realHeight){y.VML&&(this.startAlpha=1);var i,e,a,s=this.startDuration,l=this.container,h=this.updateWidth(),r=(this.realWidth=h,this.updateHeight()),n=(this.realHeight=r,y.toCoordinate),o=n(this.marginLeft,h),c=n(this.marginRight,h),u=n(this.marginTop,r)+this.getTitleHeight(),d=n(this.marginBottom,r)+this.depth3D,p=y.toNumber(this.labelRadius),f=this.measureMaxLabel();for(f>this.maxLabelWidth&&(f=this.maxLabelWidth),this.labelText&&this.labelsEnabled||(p=f=0),i=void 0===this.pieX?(h-o-c)/2+o:n(this.pieX,this.realWidth),e=void 0===this.pieY?(r-u-d)/2+u:n(this.pieY,r),(a=n(this.radius,h,r))||(h=0<=p?h-o-c-2*f:h-o-c,r=r-u-d,a=Math.min(h,r),r<h&&h<(a/=1-this.angle/90)&&(a=h),r=y.toCoordinate(this.pullOutRadius,a),a=(0<=p?a-1.8*(p+r):a-1.8*r)/2),a<this.minRadius&&(a=this.minRadius),r=n(this.pullOutRadius,a),u=y.toCoordinate(this.startRadius,a),a<=(n=n(this.innerRadius,a))&&(n=a-1),d=y.fitToBounds(this.startAngle,0,360),0<this.depth3D&&(d=270<=d?270:90),360<(d-=90)&&(d-=360),h=a-a*this.angle/90,o=f=0;o<t.length;o++)!0!==(c=t[o]).hidden&&(f+=y.roundTo(c.percents,this.pf.precision));f=y.roundTo(f,this.pf.precision),this.tempPrec=NaN,this.adjustPrecision&&100!=f&&(this.tempPrec=this.pf.precision+1);for(var g,m,b,v,S,D,C,O,k,A,x,o=0;o<t.length;o++)!0===(c=t[o]).hidden||!this.showZeroSlices&&0===c.percents||(C=360*c.percents/100,f=Math.sin((d+C/2)/180*Math.PI),m=h/a*-Math.cos((d+C/2)/180*Math.PI),b=(b=this.outlineColor)||c.color,v=this.alpha,isNaN(c.alpha)||(v=c.alpha),b={fill:c.color,stroke:b,"stroke-width":this.outlineThickness,"stroke-opacity":this.outlineAlpha,"fill-opacity":v},c.url&&(b.cursor="pointer"),b=y.wedge(l,i,e,d,C,a,h,n,this.depth3D,b,this.gradientRatio,c.pattern,this.path,this.gradientType),y.setCN(this,b,"pie-item"),y.setCN(this,b.wedge,"pie-slice"),y.setCN(this,b,c.className,!0),this.addEventListeners(b,c),c.startAngle=d,t[o].wedge=b,0<s&&(this.chartCreated||b.setAttr("opacity",this.startAlpha)),c.ix=f,c.iy=m,c.wedge=b,c.index=o,c.label=null,v=l.set(),this.labelsEnabled&&this.labelText&&c.percents>=this.hideLabelsPercent&&((S=d+C/2)<0&&(S+=360),360<S&&(S-=360),D=p,isNaN(c.labelRadius)||(D=c.labelRadius)<0&&(c.skipTick=!0),C=i+f*(a+D),O=e+m*(a+D),A=0,isNaN(g)&&350<S&&1<t.length-o&&(g=o-1+Math.floor((t.length-o)/2)),0<=D?(S<=90&&0<=S?(x=0,k="start",A=8):90<=S&&S<180?(x=1,k="start",A=8):180<=S&&S<270?(x=2,k="end",A=-8):270<=S&&S<=354?(x=3,k="end",A=-8):354<=S&&(A=g<o?(x=0,k="start",8):(x=3,k="end",-8)),c.labelQuarter=x):k="middle",S=this.formatString(this.labelText,c),(D=this.labelFunction)&&(S=D(c,S)),D=(D=c.labelColor)||this.color,""!==S&&(S=y.wrappedText(l,S,D,this.fontFamily,this.fontSize,k,!1,this.maxLabelWidth),y.setCN(this,S,"pie-label"),y.setCN(this,S,c.className,!0),S.translate(C+1.5*A,O),p<0&&(S.node.style.pointerEvents="none"),S.node.style.cursor="default",c.ty=O,c.textX=C+1.5*A,v.push(S),this.axesSet.push(v),c.labelSet=v,c.label=S,this.addEventListeners(v,c)),c.tx=C,c.tx2=C+A,c.tx0=i+f*a,c.ty0=e+m*a),C=n+(a-n)/2,c.pulled&&(C+=r),this.accessible&&this.accessibleLabel&&(O=this.formatString(this.accessibleLabel,c),this.makeAccessible(b,O)),void 0!==this.tabIndex&&b.setAttr("tabindex",this.tabIndex),c.balloonX=f*C+i,c.balloonY=m*C+e,c.startX=Math.round(f*u),c.startY=Math.round(m*u),c.pullX=Math.round(f*r),c.pullY=Math.round(m*r),this.graphsSet.push(b),(0===c.alpha||0<s&&!this.chartCreated)&&(b.hide(),v)&&v.hide(),360<(d+=360*c.percents/100)&&(d-=360));0<p&&this.arrangeLabels(),this.pieXReal=i,this.pieYReal=e,this.radiusReal=a,this.innerRadiusReal=n,0<p&&this.drawTicks(),this.initialStart(),this.setDepths()}(t=this.legend)&&t.invalidateSize()}else this.cleanChart();this.dispDUpd()},setDepths:function(){for(var t=this.chartData,i=0;i<t.length;i++){var e=t[i],a=e.wedge;0<=(e=e.startAngle)&&e<180?a.toFront():180<=e&&a.toBack()}},arrangeLabels:function(){for(var t,i=this.chartData,e=i.length,a=e-1;0<=a;a--)0!==(t=i[a]).labelQuarter||t.hidden||this.checkOverlapping(a,t,0,!0,0);for(a=0;a<e;a++)1!=(t=i[a]).labelQuarter||t.hidden||this.checkOverlapping(a,t,1,!1,0);for(a=e-1;0<=a;a--)2!=(t=i[a]).labelQuarter||t.hidden||this.checkOverlapping(a,t,2,!0,0);for(a=0;a<e;a++)3!=(t=i[a]).labelQuarter||t.hidden||this.checkOverlapping(a,t,3,!1,0)},checkOverlapping:function(t,i,e,a,s){var l,h,r=this.chartData,n=r.length,o=i.label;if(o){if(!0===a)for(h=t+1;h<n;h++)r[h].labelQuarter==e&&(l=this.checkOverlappingReal(i,r[h],e))&&(h=n);else for(h=t-1;0<=h;h--)r[h].labelQuarter==e&&(l=this.checkOverlappingReal(i,r[h],e))&&(h=0);!0===l&&s<200&&isNaN(i.labelRadius)&&(l=i.ty+3*i.iy,i.ty=l,o.translate(i.textX,l),this.checkOverlapping(t,i,e,a,s+1))}},checkOverlappingReal:function(t,i,e){var a=!1,s=t.label,l=i.label;return t.labelQuarter!=e||t.hidden||i.hidden||!l||(s=s.getBBox(),(e={}).width=s.width,e.height=s.height,e.y=t.ty,e.x=t.tx,t=l.getBBox(),(l={}).width=t.width,l.height=t.height,l.y=i.ty,l.x=i.tx,y.hitTest(e,l)&&(a=!0)),a}})}();